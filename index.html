<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>내 가상 친구 RACOO</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <main class="app">
    <header class="app__header">
      <div class="app__title-group">
        <div>
          <h1>내 가상 친구 RACOO</h1>
          <p class="app__subtitle">간단한 프로토타입 · 상태를 관리하며 친구를 돌봐요</p>
        </div>
        <button type="button" class="pet-name-button" onclick="showPetNameModal()" aria-label="펫 이름 변경">
          <span class="pet-name-button__icon">✏️</span>
          <span class="pet-name-button__text">이름 변경</span>
        </button>
      </div>
      <div class="theme-switcher" aria-label="테마 선택">
        <label for="themeSelect">테마</label>
        <select id="themeSelect">
          <option value="classic">클래식</option>
          <option value="night" disabled>야간</option>
          <option value="cotton" disabled>코튼캔디</option>
        </select>
      </div>
    </header>

    <section class="pet-panel">
      <div class="pet">
        <div class="pet__background"></div>
        <div class="pet__shadow"></div>
        <div class="pet__body">
          <div class="pet__accessory pet__accessory--head"></div>
          <!-- 더러움 레이어 (청결도가 낮을 때 표시) -->
          <div class="pet__dirt"></div>
          <!-- 씻기기 효과 (비누 거품) -->
          <div class="pet__bubbles"></div>
          <!-- 먹이주기 효과 (음식 아이템) -->
          <div class="pet__food"></div>
          <!-- 재우기 효과 (Zzz 이모지) -->
          <div class="pet__zzz">💤</div>
          <div class="pet__face">
            <div class="pet__eye pet__eye--left">
              <div class="pet__pupil"></div>
              <div class="pet__eye-highlight"></div>
            </div>
            <div class="pet__eye pet__eye--right">
              <div class="pet__pupil"></div>
              <div class="pet__eye-highlight"></div>
            </div>
            <div class="pet__cheek pet__cheek--left"></div>
            <div class="pet__cheek pet__cheek--right"></div>
            <div class="pet__mouth">
              <div class="pet__mouth-inner"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="mood" id="moodText">기분 최고!</div>
    </section>

    <section class="info-tabs" aria-label="정보 및 상점">
      <div class="info-tabs__nav" role="tablist">
        <button type="button" class="info-tabs__button is-active" role="tab" aria-selected="true" data-tab="status">상태</button>
        <button type="button" class="info-tabs__button" role="tab" aria-selected="false" data-tab="shop">상점</button>
        <button type="button" class="info-tabs__button" role="tab" aria-selected="false" data-tab="inventory">장착</button>
        <button type="button" class="info-tabs__button" role="tab" aria-selected="false" data-tab="stats">통계</button>
      </div>
      <div class="info-tabs__panel is-active" role="tabpanel" data-panel="status">
        <section class="status-panel">
          <h2>상태</h2>
          <div class="level-card">
            <div class="level-card__info">
              <span class="level-card__label">레벨</span>
              <span class="level-card__value" id="levelValue">Lv. 1</span>
            </div>
            <div class="level-card__xp">
              <span class="level-card__xp-text" id="xpText">0 / 120 XP</span>
              <div class="stat__bar stat__bar--xp">
                <div class="stat__fill stat__fill--xp" id="xpBar"></div>
              </div>
            </div>
            <div class="level-card__meta">
              <span class="level-card__meta-label">코인</span>
              <span class="level-card__meta-value" id="coinValue">0</span>
            </div>
          </div>
      <div class="status-panel__stats">
        <div class="stat">
          <span class="stat__label">배고픔</span>
          <div class="stat__bar">
            <div class="stat__fill stat__fill--hunger" id="hungerBar"></div>
          </div>
        </div>
        <div class="stat">
          <span class="stat__label">청결</span>
          <div class="stat__bar">
            <div class="stat__fill stat__fill--cleanliness" id="cleanlinessBar"></div>
          </div>
        </div>
        <div class="stat">
          <span class="stat__label">에너지</span>
          <div class="stat__bar">
            <div class="stat__fill stat__fill--energy" id="energyBar"></div>
          </div>
        </div>
        <div class="stat">
          <span class="stat__label">즐거움</span>
          <div class="stat__bar">
            <div class="stat__fill stat__fill--fun" id="funBar"></div>
          </div>
        </div>
      </div>
         </section>
      </div>

      <div class="info-tabs__panel" role="tabpanel" data-panel="shop" hidden>
        <section class="shop-panel">
          <div class="shop-panel__header">
            <h2>상점</h2>
            <span class="shop-panel__coins">보유 코인 <strong id="shopCoins">0</strong></span>
          </div>
          <div class="shop-panel__list" id="shopList" aria-live="polite"></div>
        </section>
      </div>

      <div class="info-tabs__panel" role="tabpanel" data-panel="inventory" hidden>
        <section class="inventory-panel">
          <div class="inventory-panel__header">
            <h2>장착</h2>
          </div>
          <div class="inventory-panel__slots" id="accessorySlots" aria-live="polite"></div>
        </section>
      </div>

      <div class="info-tabs__panel" role="tabpanel" data-panel="stats" hidden>
        <section class="stats-panel">
          <h2>통계</h2>
          <div class="stats-panel__content" id="statsContent" aria-live="polite"></div>
        </section>
      </div>
    </section>

    <section class="action-panel" aria-label="행동 선택">
      <h2>행동</h2>
      <div class="action-panel__grid">
        <button type="button" class="action-button" data-action="feed">먹이 주기</button>
        <button type="button" class="action-button" data-action="clean">씻기기</button>
        <button type="button" class="action-button" data-action="play">놀아주기</button>
        <button type="button" class="action-button" data-action="sleep">재우기</button>
        <button type="button" class="action-button action-button--secondary" data-action="reset">초기화</button>
      </div>
    </section>

    <!-- Admin 툴 모달 -->
    <div class="admin-modal" id="adminModal" aria-hidden="true" role="dialog" aria-labelledby="adminTitle">
      <div class="admin-modal__overlay" onclick="closeAdminModal()"></div>
      <div class="admin-modal__content">
        <header class="admin-modal__header">
          <h2 class="admin-modal__title" id="adminTitle">Admin 툴</h2>
          <button type="button" class="admin-modal__close" onclick="closeAdminModal()" aria-label="닫기">×</button>
        </header>
        <div class="admin-modal__body">
          <div class="admin-section">
            <h3 class="admin-section__title">펫 이미지 변경</h3>
            <div class="admin-control">
              <label for="adminPetImageUrl">이미지 URL</label>
              <input type="text" id="adminPetImageUrl" class="admin-input" placeholder="https://example.com/pet.png" />
              <button type="button" class="action-button action-button--secondary" onclick="applyPetImage()">적용</button>
              <button type="button" class="action-button action-button--secondary" onclick="resetPetImage()">원복</button>
            </div>
          </div>

          <div class="admin-section">
            <h3 class="admin-section__title">상태 직접 설정</h3>
            <div class="admin-control-group">
              <div class="admin-control">
                <label for="adminHunger">배고픔</label>
                <input type="number" id="adminHunger" class="admin-input" min="0" max="100" value="75" />
              </div>
              <div class="admin-control">
                <label for="adminCleanliness">청결</label>
                <input type="number" id="adminCleanliness" class="admin-input" min="0" max="100" value="75" />
              </div>
              <div class="admin-control">
                <label for="adminEnergy">에너지</label>
                <input type="number" id="adminEnergy" class="admin-input" min="0" max="100" value="75" />
              </div>
              <div class="admin-control">
                <label for="adminFun">즐거움</label>
                <input type="number" id="adminFun" class="admin-input" min="0" max="100" value="75" />
              </div>
            </div>
            <button type="button" class="action-button" onclick="applyPetStats()">상태 적용</button>
            <button type="button" class="action-button action-button--secondary" onclick="setMaxStats()">모두 100으로</button>
          </div>

          <div class="admin-section">
            <h3 class="admin-section__title">레벨/코인/XP 설정</h3>
            <div class="admin-control-group">
              <div class="admin-control">
                <label for="adminLevel">레벨</label>
                <input type="number" id="adminLevel" class="admin-input" min="1" max="99" value="1" />
              </div>
              <div class="admin-control">
                <label for="adminXp">XP</label>
                <input type="number" id="adminXp" class="admin-input" min="0" value="0" />
              </div>
              <div class="admin-control">
                <label for="adminCoins">코인</label>
                <input type="number" id="adminCoins" class="admin-input" min="0" value="0" />
              </div>
            </div>
            <button type="button" class="action-button" onclick="applyLevelCoinsXp()">적용</button>
          </div>

          <div class="admin-section">
            <h3 class="admin-section__title">아이템/테마 관리</h3>
            <div class="admin-control-group">
              <button type="button" class="action-button" onclick="unlockAllItems()">모든 아이템 잠금 해제</button>
              <button type="button" class="action-button" onclick="unlockAllThemes()">모든 테마 잠금 해제</button>
              <button type="button" class="action-button action-button--secondary" onclick="resetItemsThemes()">아이템/테마 초기화</button>
            </div>
          </div>
        </div>
        <footer class="admin-modal__footer">
          <button type="button" class="action-button action-button--secondary" onclick="closeAdminModal()">닫기</button>
        </footer>
      </div>
    </div>

    <section class="minigame-overlay" id="minigameOverlay" aria-hidden="true">
      <div class="minigame">
        <header class="minigame__header">
          <div>
            <h2>놀아주기 미니게임</h2>
            <p class="minigame__subtitle">플레이 방식을 선택하고 친구와 즐거운 시간을 보내요.</p>
          </div>
          <button type="button" class="minigame__close" id="minigameClose" aria-label="미니게임 닫기">×</button>
        </header>

        <nav class="minigame__tabs" role="tablist" aria-label="미니게임 선택">
          <button type="button" class="minigame__tab is-active" role="tab" aria-selected="true" data-minigame-nav="rhythm">패드 리듬</button>
          <button type="button" class="minigame__tab" role="tab" aria-selected="false" data-minigame-nav="dodge">똥 피하기</button>
        </nav>

        <div class="minigame__panel-group">
          <section class="minigame__panel is-active" role="tabpanel" data-minigame-panel="rhythm">
            <p class="minigame__description">빛나는 패드를 빠르게 눌러 점수를 올려 보세요! 제한된 라운드 동안 정확하게 반응할수록 보상이 커집니다.</p>
            <div class="minigame__status">
              <div>라운드 <span id="minigameRound">0</span>/<span id="minigameTotal">0</span></div>
              <div>성공 <span id="minigameHits">0</span> · 실패 <span id="minigameMisses">0</span></div>
            </div>
        <div class="minigame__timer" aria-label="남은 반응 시간">
          <div class="minigame__timer-track">
            <div class="minigame__timer-fill" id="minigameTimer"></div>
          </div>
          <span class="minigame__timer-text" id="minigameTimerText">1.3s</span>
        </div>
            <div class="minigame__pads" id="minigamePads" role="group" aria-label="리듬 패드">
              <button type="button" class="minigame__pad" data-pad="0">1</button>
              <button type="button" class="minigame__pad" data-pad="1">2</button>
              <button type="button" class="minigame__pad" data-pad="2">3</button>
              <button type="button" class="minigame__pad" data-pad="3">4</button>
            </div>
            <div class="minigame__controls">
              <button type="button" class="action-button" id="minigameStart">시작</button>
              <button type="button" class="action-button action-button--secondary" id="minigameGiveUp">그만두기</button>
            </div>
            <div class="minigame__progress">
              <div class="minigame__progress-bar" id="minigameProgress"></div>
            </div>
          </section>

          <section class="minigame__panel" role="tabpanel" data-minigame-panel="dodge" hidden>
            <p class="minigame__description">30초 동안 떨어지는 똥을 모두 피해 살아남으세요! 방향키 또는 좌우 버튼으로 펫을 이동할 수 있어요.</p>
            <div class="dodge-status">
              <div>남은 시간 <strong id="dodgeTime">30.0s</strong></div>
              <div>체력 <span id="dodgeLives" class="dodge-status__lives">♥♥♥</span></div>
            </div>
            <div class="dodge-game" id="dodgeGameArea" role="application" aria-label="똥 피하기 게임 영역">
              <div class="dodge-game__player" id="dodgePlayer"></div>
            </div>
            <div class="dodge-controls" aria-hidden="false">
              <button type="button" class="dodge-controls__button" id="dodgeControlLeft" aria-label="왼쪽 이동">←</button>
              <button type="button" class="dodge-controls__button" id="dodgeControlRight" aria-label="오른쪽 이동">→</button>
            </div>
            <div class="minigame__controls">
              <button type="button" class="action-button" id="dodgeStart">시작</button>
              <button type="button" class="action-button action-button--secondary" id="dodgeGiveUp">그만두기</button>
            </div>
          </section>
        </div>
      </div>
    </section>

    <footer class="app__footer">
      <p>간단한 웹 프로토타입 · 저장은 로컬 브라우저에 보관됩니다.</p>
    </footer>
  </main>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <!-- 펫 이름 변경 모달 -->
  <div class="pet-name-modal" id="petNameModal" aria-hidden="true" role="dialog" aria-labelledby="petNameTitle">
    <div class="pet-name-modal__overlay" onclick="closePetNameModal()"></div>
    <div class="pet-name-modal__content">
      <header class="pet-name-modal__header">
        <h2 class="pet-name-modal__title" id="petNameTitle">펫 이름 변경</h2>
        <button type="button" class="pet-name-modal__close" onclick="closePetNameModal()" aria-label="닫기">×</button>
      </header>
      <div class="pet-name-modal__body">
        <label for="petNameInput" class="pet-name-modal__label">새 이름을 입력해주세요</label>
        <input
          type="text"
          id="petNameInput"
          class="pet-name-modal__input"
          placeholder="펫 이름"
          maxlength="20"
          aria-label="펫 이름 입력"
          onkeydown="if(event.key === 'Enter') applyPetNameChange()"
        />
        <p class="pet-name-modal__hint">한글, 영문, 숫자만 사용 가능 (최대 20자)</p>
      </div>
      <footer class="pet-name-modal__footer">
        <button type="button" class="action-button action-button--secondary" onclick="closePetNameModal()">취소</button>
        <button type="button" class="action-button" onclick="applyPetNameChange()">변경</button>
      </footer>
    </div>
  </div>

  <!-- 출석 보상 모달 -->
  <div class="attendance-modal" id="attendanceModal" aria-hidden="true" role="dialog" aria-labelledby="attendanceTitle">
    <div class="attendance-modal__overlay" onclick="closeAttendanceModal()"></div>
    <div class="attendance-modal__content">
      <header class="attendance-modal__header">
        <h2 class="attendance-modal__title" id="attendanceTitle">일일 출석 보상</h2>
        <button type="button" class="attendance-modal__close" onclick="closeAttendanceModal()" aria-label="닫기">×</button>
      </header>
      <div class="attendance-modal__body">
        <div class="attendance-modal__consecutive" id="attendanceConsecutive">첫 출석</div>
        <div class="attendance-modal__rewards">
          <div class="attendance-reward">
            <span class="attendance-reward__label">코인</span>
            <span class="attendance-reward__value" id="attendanceCoins">0</span>
          </div>
          <div class="attendance-reward">
            <span class="attendance-reward__label">경험치</span>
            <span class="attendance-reward__value" id="attendanceXp">0</span>
          </div>
        </div>
        <div class="attendance-modal__bonus" id="attendanceBonus" style="display: none;"></div>
        <div class="attendance-modal__levelup" id="attendanceLevelUp" style="display: none;"></div>
      </div>
      <footer class="attendance-modal__footer">
        <button type="button" class="action-button" onclick="closeAttendanceModal()">확인</button>
      </footer>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>

